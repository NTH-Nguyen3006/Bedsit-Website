<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{admin/base.html}">

<head>
    <title layout:title-pattern="$CONTENT_TITLE">Admin | Thêm phòng</title>
    <script src="https://cdn.tiny.cloud/1/cysxosndxu60zk3yax2kz9u6hjmdn0cuxw0ipk9ajny70m7e/tinymce/8/tinymce.min.js"
        referrerpolicy="origin" crossorigin="anonymous"></script>
</head>

<div class="container-xxl" layout:fragment="admin-main-content">
    <div class="d-flex mt-5 align-items-center">
        <h1 class="text-uppercase fw-bolder">thêm phòng trọ</h1>
    </div>
    <hr class="mt-0">

    <div class="mb-5 row" id="upload-images-box">
        <!-- <div class="col-lg-2 col-md-3 col-sm-6">
            <div class="shadow rounded-3" id="upload-images-box"
                style="cursor: pointer; width: 100%; height: 140px; max-width: 200px; border: 2px solid #b3b3b3;">
                <img src="" class="w-100 h-100">
            </div>
        </div> -->

        <div class="col-lg-2 col-md-3 col-sm-6 ">
            <div class="shadow rounded-3 position-relative" id="upload-image-box"
                style="cursor: pointer; width: 100%; height: 140px; max-width: 200px; border: 2px solid #b3b3b3;">
                <img class="position-absolute end-50" th:src="@{/images/icons/plus-gadient.png}" width="100"
                    style="transform: translate(50%, 15px);">
            </div>
        </div>
    </div>

    <div class="d-none">
        <label for="fileChoosen">Chọn File</label>
        <input type="file" id="fileChoosen" multiple>
    </div>

    <div class="mb-3">
        <textarea name="description"></textarea>
    </div>
    <div class="">
        <button class="btn btn-secondary">Hủy</button>
        <button class="btn btn-success">Lưu</button>
    </div>

    <script layout:fragment="script-block">
        tinymce.init({
            selector: 'textarea',
            toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat',
        });

        const images = [];
        document.getElementById("upload-image-box").addEventListener("click", () => {
            const reader = new FileReader();

            reader.onload = (e) => {
                console.log(e.target.result);
                const imageUploadHtml = `<div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="shadow rounded-3" id="upload-images-box"
                        style="cursor: pointer; width: 100%; height: 140px; max-width: 200px; border: 2px solid #b3b3b3;">
                        <img src="${e.target.result}" class="w-100 h-100">
                    </div>
                </div>`;

                const uploadImgBox = document.getElementById("upload-images-box");
                uploadImgBox.innerHTML = imageUploadHtml + uploadImgBox.innerHTML;
            }

            const inputFile = document.createElement("input");
            inputFile.type = "file";
            inputFile.onchange = (e) => {
                reader.readAsDataURL(e.target.files[0]);
            };
            inputFile.click();
        });

        window.addEventListener("load", () => { // Kích hoạt khi web load xong hết
            console.log(document.getElementsByClassName("tox-statusbar")[0]);
            document.getElementsByClassName("tox-statusbar")[0].classList.add("d-none");
        });
    </script>
</div>

</html>